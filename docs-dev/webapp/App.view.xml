<mvc:View controllerName="recap.App"
  xmlns="sap.m"
  xmlns:c="sap.suite.ui.commons"
  xmlns:core="sap.ui.core"
  xmlns:f="sap.ui.webc.fiori"
  xmlns:fm="sap.ui.webc.main"
  xmlns:l="sap.ui.layout"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:unified="sap.ui.unified"
  width="100%">
  <App>

    <Page showHeader="false">

      <f:ShellBar primaryTitle="re>≡CAP 2023"
        secondaryTitle="St. Leon-Rot, DE">
        <f:logo>
          <fm:Avatar shape="Square">
            <Image src="./img/recap-2023-logo-small.png" />
          </fm:Avatar>
        </f:logo>
      </f:ShellBar>


      <Panel headerText="🎟️ Tickets!"
        expandable="true"
        expanded="true"
        width="auto"
        class="sapUiResponsiveMargin"
        visible="{path: '', formatter: '.isItTimeYet'}">
        <content>
          <FormattedText htmlText="{/tickets}"
            class="where" />
          <Text text="Yes, you can register for the triplet (Hackathon, UI5con, reCAP) or for any combination at above URL 😄"
            class="t-small" />
          <Text text="If sold out, you'll be put on the waiting list. The next free spot will automatically be yours!"
            class="t-small" />
        </content>
      </Panel>

      <Panel expandable="true"
        headerText="July 5: Hackathon"
        width="auto"
        class="sapUiResponsiveMargin"
        expanded="{value: 'hackathon', formatter: '.isItTimeFor'}">
        <content>
          <Text text="goal: test the pluggability of the new CAP DB Layer by bolting in Azure Cosmos DB support!" class="where"></Text>
          <c:Timeline content="{hackathon>/items}"
            sortOldestFirst="true"
            textHeight="automatic"
            enableDoubleSided="true"
            showHeaderBar="false">
            <c:TimelineItem icon="{hackathon>icon}"
              title="{hackathon>what}"
              text="{hackathon>description}"
              dateTime="{hackathon>startTime}">
            </c:TimelineItem>
          </c:Timeline>

        </content>
      </Panel>

      <Panel expandable="true"
        expanded="{value: 'recap', formatter: '.isItTimeFor'}"
        headerText="July 7: re>≡CAP (schedule subject to change!)"
        width="auto"
        class="sapUiResponsiveMargin">
        <content>
          <PlanningCalendar startDate="{agenda>/startDate}"
            stickyHeader="true"
            rows="{agenda>/rooms}"
            appointmentSelect="onAppointmentSelect"
            viewKey="A">
            <views>
              <PlanningCalendarView key="A"
                appointmentHeight="Large"
                intervalType="Hour"
                intervalsS="2"
                intervalsM="3"
                intervalsL="3"
                showSubIntervals="false"></PlanningCalendarView>
            </views>
            <rows>
              <PlanningCalendarRow title="{agenda>name}"
                appointments="{path : 'agenda>sessions', templateShareable: false}">
                <appointments>
                  <unified:CalendarAppointment startDate="{agenda>startTime}"
                    endDate="{agenda>endTime}"
                    title="{= ${agenda>title}.toLowerCase().includes('lunch') ? '🍔 '+${agenda>title} : ${agenda>title}}"
                    text="{agenda>description}"
                    color="{= ${agenda>title}.toLowerCase().includes('lunch') ? 'lightgray' : 
                    ${agenda>title}.toLowerCase().includes('keynote') ? '#1D74BF' :
                    ${agenda>title}.toLowerCase().includes('intro') ? '#1D74BF' :
                    ${agenda>type}.toLowerCase().includes('workshop') ? '#1DBFB9' :
                    ${agenda>type}.toLowerCase().includes('meet_expert') ? '#1DBF68' :
                    '#bf681d' }">
                  </unified:CalendarAppointment>
                </appointments>
              </PlanningCalendarRow>
            </rows>
          </PlanningCalendar>
        </content>
      </Panel>

      <VBox alignItems="Center"
        class="sapUiResponsiveContentPadding t1">
        <FormattedText htmlText="{/where}"
          class="where" />
      </VBox>

    </Page>
  </App>
</mvc:View>
