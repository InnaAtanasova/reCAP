/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/BadgeCustomData","sap/base/Log","sap/m/library"],function(t,a,e){"use strict";var i="sapMBadge";var s={topLeft:"sapMBadgeTopLeft",topRight:"sapMBadgeTopRight",inline:"sapMBadgeInline"};var o=e.BadgeState;var n=function(){this.initBadgeEnablement=function(t,a){var i=a?a:this;this._oBadgeConfig=t||{};i.addEventDelegate({onAfterRendering:e},this)};function a(t,a){if(t.suffix){return a.$(t.suffix)}if(t.selector){return a.$().find(t.selector).first()}}function e(){this._isBadgeAttached=false;if(!this.getBadgeCustomData()||!l(this.getBadgeCustomData().getValue())){return false}r.call(this);if(!Object.keys(this._oBadgeConfig).length){return this}if(this._oBadgeConfig.position){this._oBadgeContainer.addClass(s[this._oBadgeConfig.position])}if(this._oBadgeConfig.accentColor){this._oBadgeContainer.addClass(i+this._oBadgeConfig.accentColor)}return this}function n(){var t=d.call(this);this._isBadgeAttached=false;t.removeClass("sapMBadgeAnimationAdd");t.width();t.addClass("sapMBadgeAnimationRemove");t.attr("data-badge","");u.call(this,"",o["Disappear"]);return this}function d(){return this.$(i)}function g(){return this.getId()+"-"+i}function r(){var t,e=g.call(this),s=d.call(this),n=this._oBadgeCustomData.getValue();this._oBadgeContainer=this._oBadgeConfig&&this._oBadgeConfig.selector?a(this._oBadgeConfig.selector,this):this.$();if(s.length){s.remove()}t=jQuery("<div></div>").addClass(i+"Indicator");t.attr("id",e);t.attr("data-badge",n);t.attr("aria-label",h.call(this));t.appendTo(this._oBadgeContainer);t.addClass("sapMBadgeAnimationAdd");this._isBadgeAttached=true;this._oBadgeContainer.addClass(i);u.call(this,n,o["Appear"])}this.updateBadge=function(t){var a=d.call(this);a.removeClass("sapMBadgeAnimationUpdate");if(l(t)){if(this._isBadgeAttached){a.attr("data-badge",t);a.attr("aria-label",h.call(this));a.width();a.addClass("sapMBadgeAnimationUpdate");u.call(this,t,o["Updated"])}else if(this.getDomRef()){r.call(this)}}else if(this._isBadgeAttached){n.call(this)}};function h(){var t=this.getAriaLabelBadgeText;return t&&typeof t==="function"&&t.call(this)}function u(t,a){if(this.onBadgeUpdate&&typeof this.onBadgeUpdate==="function"){var e=g.call(this);return this.onBadgeUpdate(t,a,e)}}function l(t){return t!==undefined&&t!=="undefined"&&t!==""}this.addCustomData=function(t){if(t.isA("sap.m.BadgeCustomData")){this.removeAggregation("customData",this._oBadgeCustomData,true);this._oBadgeCustomData=t;this.addAggregation("customData",t,true);return this.updateBadge(t.getValue())}return this.addAggregation("customData",t)};this.insertCustomData=function(t){if(t.isA("sap.m.BadgeCustomData")){this.updateBadge(t.getValue());this.removeAggregation("customData",this._oBadgeCustomData,true);this._oBadgeCustomData=t;return this.addAggregation("customData",t,true)}return this.insertAggregation("customData",t)};this.getBadgeCustomData=function(){var a=this.getCustomData().filter(function(a){return a instanceof t});return a.length?a[0]:undefined};this.removeBadgeCustomData=function(){var t;t=this._oBadgeCustomData;this._oBadgeCustomData=null;this.updateBadge("");return this.removeAggregation("customData",t,true)};this.setBadgeAccentColor=function(t){if(!this._oBadgeContainer){return false}this._oBadgeContainer.removeClass(i+this._oBadgeConfig.accentColor);this._oBadgeContainer.addClass(i+t);this._oBadgeConfig.accentColor=t};this.setBadgePosition=function(t){if(!this._oBadgeContainer){return false}this._oBadgeContainer.removeClass(i+this._oBadgeConfig.position);this._oBadgeContainer.addClass(s[t]);this._oBadgeConfig.position=t}};return n});